# HOMSA-META.md
## HOMSA 적용의 메타 과정 기록

---

## 1. 이 문서의 위치

- **HOMSA.md**: 추상 프레임워크 (추상 클래스)
- **CLAUDE.md**: 프레임워크의 구체적 인스턴스 (실제 클래스) — AI agent가 프로젝트를 이해하기 위한 문서
- **HOMSA-META.md**: 추상 → 구체 인스턴스화 과정에서 발생하는 메타 문제 기록 (이 문서)

HOMSA-META.md는 agent의 실행 참조 문서가 아니다. 프레임워크 적용 과정에서 발견된 구조적 문제와 결정 과정을 기록한다.

---

## 2. 닭과 달걀 문제

### 핵심 순환

```
Dₚ 완성 → 보정(L'ₙ) 자동화 가능
보정 필요 → Dₚ 완성 전제
```

opencode-supernova는 Dₚ를 만드는 프로젝트다. Dₚ가 완성되면 자동 보정 루프(L'ₙ)가 가동되지만, Dₚ를 완성하는 과정 자체에 보정이 필요하다. 이 보정은 현재 수동으로 수행된다 — 사람이 LLM과 대화하면서 맹점을 식별하고 문서를 업데이트하는 형태.

### 현재 상태

- 자동 보정 루프: 미존재
- 수동 보정: 사람 + LLM 대화로 수행 중
- 전환 시점: Dₚ 패키징 완료 후

이것은 결함이 아니라, "자유가 없는 나라에 자유에 대한 법을 만들면서 자유를 적용하는 과정"이다. 과정 중에는 자유가 없다는 전제가 맞다.

---

## 3. 자기무당착 수렴과 사전 정의의 불가

### HOMSA의 원칙

aₘ 자기무당착 수렴 (하트리-폭 근사):
1. 초기: aₘ = 임의 추정값
2. 실측값 수집
3. 반영
4. 반복 → 수렴

### opencode-supernova에의 적용

Xₙ, Lₙ, W는 사전에 완전 정의될 수 없다. 돌리면서 수렴하는 것이다.

- Xₙ의 Lₙ enum: 초기에는 임의로 정하고, 실행하면서 연산이 추가/제거됨
- W의 aₘ 분기 가중치: 초기에는 이론 추정, 실측으로 수렴
- evaluator 임계값(예: score 6): 초기에는 임의값, 운영하면서 조정
- retry 정책, 세션 생명주기 등 구체 정책: 임의값으로 시작, 수렴

**사전 정의가 안 되는 것을 맹점으로 잡는 것은 오류다.** 맹점은 수렴 구조의 유무이지 초기값의 정확성이 아니다.

---

## 4. 수렴 구조의 조건

자기무당착 수렴이 작동하려면:

1. **돌릴 수 있어야 한다** — 실행 가능한 상태까지의 최소 구현
2. **실측할 수 있어야 한다** — 실행 결과를 관찰하는 수단
3. **반영할 수 있어야 한다** — 실측값이 시스템 정의를 업데이트하는 경로
4. **발산을 감지할 수 있어야 한다** — aₘ이 수렴하지 않고 발산하면 구조 문제 신호

현재 상태:
- 조건 1: Dₚ 격리 완료, opencode serve 가동 중 → **부분 충족**
- 조건 2: 미구현 (X₂/X₃/X₄ 미통합, 피드백 수집 없음)
- 조건 3: 수동 (사람이 LLM과 대화로 보정)
- 조건 4: 미정의

---

## 5. CLAUDE.md의 맹점 분석 (2026-02-26)

이 대화에서 식별된 CLAUDE.md의 구조적 문제. "사전 정의 부재"는 맹점에서 제외한다.

### 반영해야 할 결정사항 (CLAUDE.md에 추가)

| 항목 | 내용 |
|------|------|
| 프로젝트명 | opencode-supernova |
| 프로젝트 본질 | user interaction bot + LLM middleware + [OmO + opencode] → 샌드박스 코드 에이전트 |
| 결과물의 위치 | 앞으로의 프로젝트에서 Dₚ가 됨 |
| opencode의 위치 | 원래 Eq이지만 Dₚ에 내장시켜 X₁으로 만듦 |
| X₁ 변동성 | opencode/OmO 업데이트에 의해 X₁이 변동됨. wrapper가 변동 흡수 경계층 |
| 미들웨어 LLM | 외부 LLM 직접 호출, stateless |
| 판단 기준 | 이전 판단 이력이 아니라 프로젝트 본질(CLAUDE.md) 기반 |
| 구체 정책 | 초기 임의값 → 운영하면서 수렴 |

### 구조적 맹점 (설계 시 해결 필요)

| # | 맹점 | 설명 |
|---|------|------|
| 1 | S 정의식 매핑 불완전 | HOMSA 기본식과의 대응이 명시되지 않음. Eq 누락, W(Xₙ) 표기가 비표준 |
| 2 | Dₚ 내부 경계 불명확 | `.devserver/` 안에서 코드(Lₙ), 데이터(Dₚ), 설정의 구분이 없음 |
| 3 | 판단 코히런스 구조 | stateless 판단이 프로젝트 본질에 기반해야 하는데, CLAUDE.md를 판단자에게 주입하는 구조가 미설계 |
| 4 | 역원 분석 부재 | 어떤 Lₙ이 비가역인지 식별 없음 → 보상 트랜잭션 설계 불가 |
| 5 | L'ₙ 보정 대상 미식별 | 시간에 따라 뭐가 틀어지는지 정의 없음 → 보정 설계 불가 |
| 6 | 서비스 건강도 r 미인스턴스화 | ε, C_range가 이 시스템에서 뭔지 정의 없음 |
| 7 | wrapper 역할 미명시 | SDK 래퍼가 아닌 X₁ 변동 흡수 경계층이라는 아키텍처적 역할이 문서에 없음 |
| 8 | 목표 파일 구조 `src/` 위치 | Dₚ 내부인지 외부인지 불명확, Lₙ과 Dₚ 분리 원칙과 충돌 가능 |
| 9 | summarizer 역할 과소 정의 | "결과 요약"이 아니라 "판단 맥락 생성기"로 재정의 필요 |
| 10 | 문서 목적 기술 | 수단(Dₚ 표준화)이 목적으로 기술됨. 실제 목적(샌드박스 코드 에이전트)으로 수정 필요 |

---

## 6. 메타 관찰

### HOMSA 인스턴스화의 일반적 패턴

이 프로젝트에서 관찰된 패턴은 HOMSA를 새 프로젝트에 적용할 때 반복될 가능성이 있다:

1. 추상 프레임워크의 기호를 먼저 붙이고 구현을 시작하려는 충동
2. 사전 정의가 불가능한 항목을 정의하려는 시도
3. 닭과 달걀 문제 (도구를 만들려면 도구가 필요)
4. 수동 보정 → 자동 보정 전환의 시점 판단

이 패턴 자체가 HOMSA 프레임워크에 피드백되어야 할 수 있다.

---

*Created: 2026-02-26*
*Source: opencode-supernova 맹점 분석 대화*
